---
layout: post
title:  "后台服务架构基线"
author: kevin
categories: 架构
tags:  架构 server baseline
---

* content
{:toc}

在几年的游戏后台开发生涯，历经了几个项目的生与死，个人认为其实后台开发有一些模式可遵循并总结，
建立适当的基线，以使下一个项目有较高之起点。本文将随着一些新的想法而持续更新。不过主要基于游戏
后台开发。


### 架构

#### 全区全服 & 分区分服
* 无论全区抑或分区，在架构设计上，都要朝着易扩展和变化来。具体到细节：
    * 小服的扩容与收缩
    * 玩家id/公会id等的全局惟一性设计(面向未来)
    * 架构上的互通性，在多平台之间（如安卓、iOS)的互通

### 服务设计
* 经常使用的基础服务有哪些？他们的设计基线是？
    * logicsvr 
        * 业务主逻辑

    * scenesvr
        * 场景

    * infosvr
        * 概要信息cache。高访问频率。

### 框架
* 各种框架有其使用之场景。
    * 异步框架
    * 协程框架
    * 同步框架
    * RPC框架


### 代码质量
* 合适的工作流，多人协作的工作方式
* 代码检查工具
* code review机制
* 单元测试框架


### 持续集成
* 工具流程梳理
    * 编译链完整
    * 配置生成工具统一
    * 打包工具完整


### 监控体系
* 关键流程监控

如登陆过程，从app启动==>建立连接==>鉴权==>进入主界面 等一系列过程中的走势图

* 关键服务指标监控

如战斗服务器的卡顿情况，场景服务器的人数，匹配服务器的成功率等关键数值监控

* 错误日志监控

通过日志文件的变化告警来发现异常突发的错误

